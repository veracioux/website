FROM debian:bookworm-slim

RUN apt-get update -y
RUN apt-get install -y rabbitmq-server nodejs
RUN apt-get install -y npm
RUN npm install -g pnpm

WORKDIR /worker

COPY worker/package.json worker/pnpm-lock.yaml /worker/
RUN pnpm install

COPY worker /worker

CMD scripts/worker_server.sh

# vim: filetype=dockerfile
